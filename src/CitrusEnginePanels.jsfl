var dom = fl.getDocumentDOM();var tl = dom.getTimeline();var library = dom.library;var fill = dom.getCustomFill();var color;function manageLayer(nameLayer, colorLayer) {		if (tl.findLayerIndex(nameLayer) == undefined) {		layernum = tl.addNewLayer(nameLayer);		tl.layers[layernum].color = colorLayer;		tl.reorderLayer(layernum, 0);	}		tl.setSelectedLayers(tl.findLayerIndex(nameLayer)[0]);}function addHero(path, classname, name, maxVelocity, jumpHeight, canDuck) {		if (!library.itemExists("Hero")) {			library.addNewItem("movie clip", "Hero");		color = '#0000FF';				manageLayer("Hero", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("Hero")]);				if (classname == "") {			classname = "com.citrusengine.objects.platformer.Hero";		}				canDuck = (canDuck == "true") ? true : false;				library.items[library.findItemIndex("Hero")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'",\n\tmaxVelocity: '+maxVelocity+',\n\tjumpHeight: '+jumpHeight+',\n\tcanDuck: '+canDuck+'\n};';				dom.enterEditMode("inPlace");		fill.color = color;  		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-30, top:-50, right:30, bottom:50}, 0, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}function addBaddy(path, classname, name, speed, startingDirection) {		if (!library.itemExists("Baddy")) {			library.addNewItem("movie clip", "Baddy");		color = '#FF0000';				manageLayer("Baddy", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("Baddy")]);				if (classname == "") {			classname = "com.citrusengine.objects.platformer.Baddy";		}				startingDirection = (startingDirection == "true") ? "left" : "right";				library.items[library.findItemIndex("Baddy")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'",\n\tspeed: '+speed+',\n\tstartingDirection: "'+startingDirection+'"\n};';				dom.enterEditMode("inPlace");		fill.color = color;  		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-30, top:-50, right:30, bottom:50}, 0, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}function addPlatform(path, classname, name, type) {		if (!library.itemExists(type)) {			library.addNewItem("movie clip", type);		color = (type == "Platform") ? '#666666' : '#999999';				manageLayer(type, color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex(type)]);				if (classname == "") {			classname = "com.citrusengine.objects.platformer.Platform";		}				var oneWay = (type == "Platform") ? false : true;		library.items[library.findItemIndex(type)].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'",\n\toneWay: '+oneWay+'\n};';				dom.enterEditMode("inPlace");		fill.color = color;		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-250, top:-10, right:250, bottom:10}, 0, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}function addMovingPlatform(path, classname, name, waitForPassenger, oneWay) {		if (!library.itemExists("MovingPlatform")) {			library.addNewItem("movie clip", "MovingPlatform");		color = '#CCCCCC';				manageLayer("MovingPlatform", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("MovingPlatform")]);				if (classname == "") {			classname = "com.citrusengine.objects.platformer.MovingPlatform";		}				oneWay = (oneWay == "true") ? true : false;		waitForPassenger = (waitForPassenger == "true") ? true : false;					library.items[library.findItemIndex("MovingPlatform")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'",\n\toneWay: '+oneWay+',\n\twaitForPassenger: '+waitForPassenger+'\n};';				dom.enterEditMode("inPlace");		fill.color = color;  		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-25, top:-15, right:25, bottom:15}, 0, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}function addSensor(path, classname, name) {		if (!library.itemExists("Sensor")) {			library.addNewItem("movie clip", "Sensor");		color = '#00FF00';				manageLayer("Sensor", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("Sensor")]);				if (classname == "") {			classname = "com.citrusengine.objects.platformer.Sensor";		}				library.items[library.findItemIndex("Sensor")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'"\n};';				dom.enterEditMode("inPlace");		fill.color = color;  		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-25, top:-25, right:25, bottom:25}, 0, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}function addPhysicObject(path, classname, name) {		if (!library.itemExists("PhysicObject")) {			library.addNewItem("movie clip", "PhysicObject");		color = '#993300';				manageLayer("PhysicObject", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("PhysicObject")]);				if (classname == "") {			classname = "com.citrusengine.objects.PhysicsObject";		}				library.items[library.findItemIndex("PhysicObject")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'"\n};';				dom.enterEditMode("inPlace");		fill.color = color;  		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-25, top:-25, right:25, bottom:25}, 0, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}function addCloud(path, classname, name, parallax) {		if (!library.itemExists("Cloud")) {			library.addNewItem("movie clip", "Cloud");		color = '#0099CC';				manageLayer("Cloud", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("Cloud")]);				if (classname == "") {			classname = "com.citrusengine.objects.CitrusSprite";		}				parallax = (parallax == "") ? 0 : parallax;				library.items[library.findItemIndex("Cloud")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'",\n\tparallax: '+parallax+'\n};';				dom.enterEditMode("inPlace");		fill.color = color;		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-25, top:-25, right:25, bottom:25}, 0, false, true); 		dom.exitEditMode();				dom.selection[0].name = name;	}}function addCoin(path, classname, name) {		if (!library.itemExists("Coin")) {			library.addNewItem("movie clip", "Coin");		color = '#FFFF00';				manageLayer("Coin", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("Coin")]);				if (classname == "") {			classname = "com.citrusengine.objects.platformer.Coin";		}				library.items[library.findItemIndex("Coin")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'"\n};';				dom.enterEditMode("inPlace");		fill.color = color;  		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewOval({left:-25, top:-25, right:25, bottom:25}, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}function addBackground(path, classname, name) {		if (!library.itemExists("Background")) {			library.addNewItem("movie clip", "Background");		color = "#000000";				manageLayer("Background", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("Background")]);				if (classname == "") {			classname = "com.citrusengine.objects.CitrusSprite";		}		library.items[library.findItemIndex("Background")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'"\n};';				dom.enterEditMode("inPlace");		dom.setFillColor(color); 		dom.addNewText({left:0, top:0, right:100, bottom:100}, "Background"); 		dom.exitEditMode();				dom.selection[0].name = name;	}}function addTeleporter(path, classname, name, endX, endY, waitingTime) {		if (!library.itemExists("Teleporter")) {			library.addNewItem("movie clip", "Teleporter");		color = '#009900';				manageLayer("Teleporter", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("Teleporter")]);				if (classname == "") {			classname = "com.citrusengine.objects.platformer.Teleporter";		}				library.items[library.findItemIndex("Teleporter")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'",\n\tendX: '+endX+',\n\tendY: '+endY+',\n\twaitingTime: '+waitingTime+'\n};';				dom.enterEditMode("inPlace");		fill.color = color;  		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-25, top:-25, right:25, bottom:25}, 0, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}function addTreadmill(path, classname, name, speedTread, startingDirection, enableTreadmill, enable) {		if (!library.itemExists("Treadmill")) {			library.addNewItem("movie clip", "Treadmill");		color = '#333333';				manageLayer("Treadmill", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("Treadmill")]);				if (classname == "") {			classname = "com.citrusengine.objects.platformer.Treadmill";		}				startingDirection = (startingDirection == "true") ? "right" : "left";		enableTreadmill = (enableTreadmill == "true") ? true : false;		enable = (enable == "true") ? true : false;				library.items[library.findItemIndex("Treadmill")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'",\n\tspeedTread: '+speedTread+',\n\tstartingDirection: "'+startingDirection+'",\n\tenableTreadmill: '+enableTreadmill+',\n\tenable: '+enable+'\n};';				dom.enterEditMode("inPlace");		fill.color = color;		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-250, top:-10, right:250, bottom:10}, 0, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}function addCannon(path, classname, name, fireRate, startingDirection, missileView) {		if (!library.itemExists("Cannon")) {			library.addNewItem("movie clip", "Cannon");		color = '#663300';				manageLayer("Cannon", color);				dom.addItem({x:0,y:0}, library.items[library.findItemIndex("Cannon")]);				if (classname == "") {			classname = "com.citrusengine.objects.platformer.Cannon";		}				startingDirection = (startingDirection == "true") ? "right" : "left";				library.items[library.findItemIndex("Cannon")].timeline.layers[0].frames[0].actionScript = 'var className = "'+classname+'";\nvar params = {\n\tview: "'+path+'",\n\tfireRate '+fireRate+',\n\tstartingDirection: "'+startingDirection+'",\n\tmissileView: "'+missileView+'"\n};';				dom.enterEditMode("inPlace");		fill.color = color;  		fill.style = "solid"; 		dom.setCustomFill(fill);		dom.addNewRectangle({left:-25, top:-25, right:25, bottom:25}, 0, false, true);		dom.exitEditMode();				dom.selection[0].name = name;	}}/*Create layers, frames, labels, actions*/function createHero() {		var layernum = tl.getSelectedLayers();	tl.insertKeyframe(10);	tl.insertKeyframe(20);	tl.insertKeyframe(30);	tl.insertKeyframe(40);	tl.insertKeyframe(50);		layernum = tl.addNewLayer('Labels');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);	tl.insertKeyframe(20);	tl.insertKeyframe(30);	tl.insertKeyframe(40);	tl.insertKeyframe(50);		tl.layers[0].frames[0].name = 'default';	tl.layers[0].frames[10].name = 'idle';	tl.layers[0].frames[20].name = 'walk';	tl.layers[0].frames[30].name = 'jump';	tl.layers[0].frames[40].name = 'duck';	tl.layers[0].frames[50].name = 'hurt';		tl.layers[0].locked = true;		layernum = tl.addNewLayer('Actions');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);	tl.insertKeyframe(20);	tl.insertKeyframe(30);	tl.insertKeyframe(40);	tl.insertKeyframe(50);		tl.layers[0].locked = true;		tl.insertFrames(9);}function createBaddy() {		var layernum = tl.getSelectedLayers();		tl.insertKeyframe(10);		layernum = tl.addNewLayer('Labels');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].frames[0].name = 'walk';	tl.layers[0].frames[10].name = 'die';		tl.layers[0].locked = true;		layernum = tl.addNewLayer('Actions');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].locked = true;		tl.insertFrames(9);}function createMissile() {		var layernum = tl.getSelectedLayers();		tl.insertKeyframe(10);		layernum = tl.addNewLayer('Labels');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].frames[0].name = 'normal';	tl.layers[0].frames[10].name = 'exploded';		tl.layers[0].locked = true;		layernum = tl.addNewLayer('Actions');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].locked = true;		tl.insertFrames(9);}function createCannon() {		var layernum = tl.getSelectedLayers();		tl.insertKeyframe(10);		layernum = tl.addNewLayer('Labels');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].frames[0].name = 'normal';	tl.layers[0].frames[10].name = 'fire';		tl.layers[0].locked = true;		layernum = tl.addNewLayer('Actions');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].locked = true;		tl.insertFrames(9);}function createTeleporter() {		var layernum = tl.getSelectedLayers();		tl.insertKeyframe(10);		layernum = tl.addNewLayer('Labels');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].frames[0].name = 'normal';	tl.layers[0].frames[10].name = 'teleport';		tl.layers[0].locked = true;		layernum = tl.addNewLayer('Actions');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].locked = true;		tl.insertFrames(9);}function createTreadmill() {		var layernum = tl.getSelectedLayers();		tl.insertKeyframe(10);		layernum = tl.addNewLayer('Labels');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].frames[0].name = 'normal';	tl.layers[0].frames[10].name = 'move';		tl.layers[0].locked = true;		layernum = tl.addNewLayer('Actions');	tl.reorderLayer(layernum, 0);	tl.setSelectedLayers(0);		tl.insertKeyframe(10);		tl.layers[0].locked = true;		tl.insertFrames(9);}